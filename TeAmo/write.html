<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspiraci√≥n del d√≠a ‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fff5f7;
            --white: #ffffff;
            --pink-accent: #f06292;
            --pink-dark: #d81b60;
            --text-dark: #4a4a4a;
            --paper-line: #f1f1f1;
        }

        body {
            background: linear-gradient(135deg, #fff5f7 0%, #fce4ec 100%);
            background-attachment: fixed;
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Decoraciones de fondo */
        .decoration {
            position: fixed;
            font-size: 2rem;
            opacity: 0.4;
            user-select: none;
            z-index: -1;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        /* Barra de navegaci√≥n */
        .nav-bar {
            width: 100%;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .back-btn {
            text-decoration: none;
            color: var(--pink-accent);
            font-weight: 500;
            transition: 0.3s;
        }

        /* La Hoja de Papel */
        .writing-area {
            background: var(--white);
            background-image: linear-gradient(var(--paper-line) 1px, transparent 1px);
            background-size: 100% 2rem; /* Esto crea las l√≠neas de cuaderno */
            width: 90%;
            max-width: 750px;
            min-height: 80vh;
            margin: 3rem 0;
            border-radius: 5px; /* Bordes m√°s rectos para parecer papel */
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.1), 
                0 10px 0 -5px #eee, 
                0 10px 1px -4px rgba(0,0,0,0.1), 
                0 20px 0 -10px #eee, 
                0 20px 1px -9px rgba(0,0,0,0.1), 
                0 40px 30px rgba(0,0,0,0.15); /* Efecto de hojas apiladas */
            padding: 4rem 3rem;
            display: flex;
            flex-direction: column;
            position: relative;
            animation: sheetIn 0.8s ease-out;
        }

        @keyframes sheetIn {
            from { opacity: 0; transform: translateY(50px) rotate(2deg); }
            to { opacity: 1; transform: translateY(0) rotate(0deg); }
        }

        /* T√≠tulo Estilo Pluma */
        .input-title {
            border: none;
            background: transparent;
            outline: none;
            font-size: 3rem;
            color: var(--pink-dark);
            font-family: 'Dancing Script', cursive;
            width: 100%;
            margin-bottom: 0.5rem;
            z-index: 2;
        }

        .divider {
            height: 1px;
            width: 100%;
            background: #f8bbd0;
            margin-bottom: 2rem;
        }

        /* Cuerpo del texto */
        .input-body {
            border: none;
            background: transparent;
            outline: none;
            width: 100%;
            flex-grow: 1;
            font-size: 1.3rem;
            line-height: 2rem; /* Debe coincidir con el background-size de la hoja */
            color: var(--text-dark);
            resize: none;
            font-family: 'Quicksand', sans-serif;
            z-index: 2;
        }

        .save-btn {
            background: linear-gradient(45deg, var(--pink-accent), var(--pink-dark));
            color: white;
            border: none;
            padding: 0.8rem 2.5rem;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(216, 27, 96, 0.3);
            transition: 0.3s;
        }

        .save-btn:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        /* Decoraciones en las esquinas de la hoja */
        .sheet-decoration {
            position: absolute;
            font-size: 1.5rem;
            color: #fce4ec;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="decoration" style="top: 15%; left: 5%;">üå∏</div>
    <div class="decoration" style="top: 60%; left: 8%;">‚ú®</div>
    <div class="decoration" style="top: 25%; right: 10%; animation-delay: 1s;">üíñ</div>
    <div class="decoration" style="top: 75%; right: 5%; animation-delay: 2s;">üå∑</div>

    <div class="nav-bar">
        <a href="home.html" class="back-btn">‚Üê Volver</a>
        <button class="save-btn" id="btnGuardar" onclick="guardarHistoria()">Guardar en el alma</button>
    </div>

    <div class="writing-area">
        <div class="sheet-decoration" style="top: 10px; right: 15px;">üåø</div>
        <div class="sheet-decoration" style="bottom: 10px; left: 15px;">‚ú®</div>

        <input type="text" class="input-title" id="titulo" placeholder="Un t√≠tulo hermoso..." autofocus>
        <div class="divider"></div>
        <textarea class="input-body" id="historia" placeholder="Escribe aqu√≠ tu magia..."></textarea>
    </div>

    <script>
        // ... (Tu c√≥digo JavaScript para guardarHistoria se mantiene igual)
        const urlParams = new URLSearchParams(window.location.search);
        let editId = urlParams.get('edit');

        window.onload = function() {
            if (editId) {
                const historias = JSON.parse(localStorage.getItem('misHistorias')) || [];
                const historiaAEditar = historias.find(h => h.id == editId);
                if (historiaAEditar) {
                    document.getElementById('titulo').value = historiaAEditar.titulo;
                    document.getElementById('historia').value = historiaAEditar.cuerpo;
                    document.getElementById('btnGuardar').innerText = "Actualizar recuerdo";
                }
            }
        };

        function guardarHistoria() {
            const titulo = document.getElementById('titulo').value.trim();
            const cuerpo = document.getElementById('historia').value.trim();
            if (!titulo || !cuerpo) return alert("¬°Escribe algo lindo primero! ‚ú®");

            let historias = JSON.parse(localStorage.getItem('misHistorias')) || [];
            if (editId) {
                historias = historias.map(h => h.id == editId ? {...h, titulo, cuerpo} : h);
            } else {
                historias.unshift({ id: Date.now(), titulo, cuerpo, fecha: new Date().toLocaleDateString('es-ES', {day:'numeric', month:'long'}) });
            }
            localStorage.setItem('misHistorias', JSON.stringify(historias));
            window.location.href = 'home.html';
        }
    </script>
</body>
</html>